import Inscripciones from '../modelos/inscripciones.js';
import Curso from '../modelos/Curso.js';
import Asignaciones from '../modelos/asignaciones.js';
import Horario from '../modelos/Horario.js';
import Maestro from '../modelos/Maestro.js';

export const obtenerDetallesAlumno = async (matricula) => {
  try {
    const resultado = await Inscripciones.findAll({
      where: { matricula_alumno: matricula }, // Filtra por matrícula del alumno
      include: [
        {
          model: Curso,
          include: [
            {
              model: Asignaciones,
              include: [
                { model: Maestro }, // Maestro que imparte el curso
                { model: Horario }, // Horario del curso
              ],
            },
          ],
        },
      ],
    });

    return resultado; // Devuelve el resultado de la búsqueda
  } catch (error) {
    console.error('Error al obtener detalles del alumno:', error);
    throw error; // Lanza el error para que el controlador lo maneje
  }
};
